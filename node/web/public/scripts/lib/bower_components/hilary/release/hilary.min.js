/*! hilary-build 2015-10-01 */
!function(a,b){"use strict";if(a.Hilary)return!1;var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q=[],r={},s=[];h={bootstrapperRegistration:"hilary::bootstrapper",containerRegistration:"hilary::container",parentContainerRegistration:"hilary::parent",blueprintRegistration:"hilary::Blueprint",notResolvable:"hilary::handler::not::resolvable",blackListedRegistrations:{"hilary::bootstrapper":!0,"hilary::container":!0,"hilary::parent":!0,"hilary::Blueprint":!0},pipeline:{beforeRegister:"hilary::before::register",afterRegister:"hilary::after::register",beforeResolve:"hilary::before::resolve",afterResolve:"hilary::after::resolve",beforeNewChild:"hilary::before::new::child",afterNewChild:"hilary::after::new::child",onError:"hilary::error"}},i=function(){var a,b,c={getType:void 0,defined:void 0,nullOrUndefined:void 0,"function":void 0,object:void 0,array:void 0,string:void 0,bool:void 0,"boolean":void 0,date:void 0,datetime:void 0,regexp:void 0,number:void 0,nullOrWhitespace:void 0,money:void 0,decimal:void 0,Window:void 0,not:{defined:void 0,"function":void 0,object:void 0,array:void 0,string:void 0,bool:void 0,"boolean":void 0,date:void 0,datetime:void 0,regexp:void 0,number:void 0,nullOrWhitespace:void 0,money:void 0,decimal:void 0,Window:void 0}},d={},e=["Boolean","Number","String","Function","Array","Date","RegExp","Object"];for(a=0;a<e.length;a+=1)b=e[a],d["[object "+b+"]"]=b.toLowerCase();return c.getType=function(a){return"undefined"==typeof a?"undefined":null===a?String(a):"object"==typeof a||"function"==typeof a?d[Object.prototype.toString.call(a)]||"object":typeof a},c.defined=function(a){try{return"undefined"!==c.getType(a)}catch(b){return!1}},c.not.defined=function(a){return c.defined(a)===!1},c.nullOrUndefined=function(a){return c.not.defined(a)||null===a},c.not.nullOrWhitespace=function(a){return"undefined"==typeof a||null===typeof a||c.not.string(a)?!1:/([^\s])/.test(a)},c.nullOrWhitespace=function(a){return c.not.nullOrWhitespace(a)===!1},c["function"]=function(a){return"function"===c.getType(a)},c.not["function"]=function(a){return c["function"](a)===!1},c.object=function(a){return"object"===c.getType(a)},c.not.object=function(a){return c.object(a)===!1},c.array=function(a){return"array"===c.getType(a)},c.not.array=function(a){return c.array(a)===!1},c.string=function(a){return"string"===c.getType(a)},c.not.string=function(a){return c.string(a)===!1},c.bool=function(a){return"boolean"===c.getType(a)},c.not.bool=function(a){return c["boolean"](a)===!1},c["boolean"]=function(a){return"boolean"===c.getType(a)},c.not["boolean"]=function(a){return c["boolean"](a)===!1},c.datetime=function(a){return"date"===c.getType(a)&&!isNaN(a.getTime())},c.not.datetime=function(a){return c.datetime(a)===!1},c.date=c.datetime,c.not.date=c.not.datetime,c.regexp=function(a){return"regexp"===c.getType(a)},c.not.regexp=function(a){return c.regexp(a)===!1},c.number=function(a){return"number"===c.getType(a)},c.not.number=function(a){return c.number(a)===!1},c.money=function(a){return c.defined(a)&&/^(?:-)?[0-9]\d*(?:\.\d{0,2})?$/.test(a.toString())},c.not.money=function(a){return c.money(a)===!1},c.decimal=function(a,b){return c.not.number(a)?!1:!b&&c.number(a)?!0:a&&+(+a||0).toFixed(b)===+a?!0:!1},c.not.decimal=function(a){return c.decimal(a)===!1},c.Window=function(a){return c.is.defined(Window)&&a instanceof Window},c.not.Window=function(a){return c.is.Window(a)===!1},c}(),j=function(){var a,b={createUid:void 0,createGuid:void 0};return a=function(a){return a.replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})},b.createUid=function(b){var c;return b=b||12,c=new Array(b+1).join("x"),a(c)},b.createGuid=function(){return a("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx")},b}(),k=function(a){var b={runAsync:void 0};return b.runAsync=function(b,c){c===!0&&a.defined(process)&&a["function"](process.nextTick)?process.nextTick(b):setTimeout(b,0)},b}(i),l=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q={errors:{blueprint:{requiresImplementation:"An implementation is required to create a new instance of an interface",requiresProperty:"The implementation is missing a required property",requiresArguments:"The implementation of this function requires arguments",missingConstructorArgument:"An object literal is required when constructing a Blueprint",reservedPropertyName_singatureMatches:"signatureMatches is a reserved property name for Blueprints",missingSignatureMatchesImplementationArgument:"A first argument of an object that should implement an interface is required",missingSignatureMatchesCallbackArgument:"A callback function is required as the second argument to signatureMatches"}}};return e=function(a,b,c){var d;a.__interfaces=a.__interfaces||{},d=function(d,e){d||(a.__interfaces[b.__blueprintId]=!0),"function"==typeof c&&c(d,e)},g(a,b,d)},f=function(a,b){var c;return a.__interfaces=a.__interfaces||{},c=h(a,b),c.result&&(a.__interfaces[b.__blueprintId]=!0),c},g=function(a,b,c){var d=h(a,b);d.result?c(null,!0):c(d.errors,!1)},h=function(a,b){var c,d=[];if(a.__interfaces[b.__blueprintId])return{errors:null,result:!0};for(c in b.props)b.props.hasOwnProperty(c)&&i(b.__blueprintId,a,c,b.props[c],d);return d.length>0?{errors:d,result:!1}:{errors:null,result:!0}},i=function(a,c,d,e,f){b.string(e)?k(a,c,d,e,f):b.object(e)&&j(a,c,d,e,e.type,f)},j=function(a,c,d,e,f,g){if(e.required!==!1||!b.not.defined(c[d])&&null!==c[d])if(b["function"](e.validate))e.validate(c[d],g,c);else switch(f){case"blueprint":o(e.blueprint,c,d,g);break;case"function":k(a,c,d,f,g),e.args&&l(a,c,d,e.args,g);break;case"decimal":m(a,c,d,e.places,g);break;default:k(a,c,d,f,g)}},p=function(a,b,c,d){var e=a.concat(" @blueprint: ",b," @property: ",c," (",d,")");return e},k=function(a,c,d,e,f){b["function"](b.not[e])&&b.not[e](c[d])&&f.push(p(q.errors.blueprint.requiresProperty,a,d,e))},l=function(a,c,d,e,f){var g,h;if(g=b.array(e),g=g&&e.length>0,g=g&&b["function"](c[d]),g=g&&c[d].length===e.length,!g){try{h=e.join(", ")}catch(i){h=e.toString()}f.push(p(q.errors.blueprint.requiresArguments,a,d,h))}},m=function(a,c,d,e,f){b.not.decimal(c[d],e)&&f.push(p(q.errors.blueprint.requiresProperty,a,d,"decimal with "+e+" places"))},n=function(a,c,d,e){b["function"](b.not["boolean"])&&b.not["boolean"](c[d])&&e.push(p(q.errors.blueprint.requiresProperty,a,d,"boolean"))},o=function(a,b,c,d){var e,f=a.syncSignatureMatches(b[c]);if(!f.result)for(e=0;e<f.errors.length;e+=1)d.push(f.errors[e])},d=function(d){var g,h=this;d=d||{},h.props={};for(g in d)d.hasOwnProperty(g)&&("__blueprintId"===g?h.__blueprintId=d.__blueprintId:h.props[g]=d[g]);b.not.string(h.__blueprintId)&&(h.__blueprintId=c.createUid(8)),h.signatureMatches=function(c,d){if(b.not.defined(c))return void d([q.errors.blueprint.missingSignatureMatchesImplementationArgument]);if(b.not["function"](d))throw new Error(q.errors.blueprint.missingSignatureMatchesCallbackArgument);a.runAsync(function(){e(c,h,d)})},h.syncSignatureMatches=function(a){return b.not.defined(a)?{errors:[q.errors.blueprint.missingSignatureMatchesImplementationArgument],result:!1}:f(a,h)},h.inherits=function(a){for(g in a.props)a.props.hasOwnProperty(g)&&(h.props[g]=a.props[g])}}}(k,i,j),m=function(a,b){var c,d={};return c=function(b,c,d){var e=a.string(c)?c:b,f=new Error(e);return f.message=e,b!==e&&(f.name=b),d&&(f.data=d),f},d.makeException=c,d.argumentException=function(b,d,e){var f=a.not.defined(d)?b:b+" (argument: "+d+")";return c("ArgumentException",f,e)},d.throwArgumentException=function(a,b,c){return d.throwException(d.argumentException(a,b,c))},d.dependencyException=function(b,d,e){var f=a.not.defined(d)?b:b+" (dependency: "+d+"). If the module exists, does it return a value?";return c("DependencyException",f,e)},d.throwDependencyException=function(a,b,c){return d.throwException(d.dependencyException(a,b,c))},d.notImplementedException=function(a,b){return c("NotImplementedException",a,b)},d.throwNotImplementedException=function(a,b){return d.throwException(d.notImplementedException(a,b))},d.notResolvableException=function(a){return d.dependencyException("The module cannot be resolved",a)},d.throwNotResolvableException=function(a){return d.throwException(d.notResolvableException(a))},d.throwException=function(c){var e=a.string(c)?d.makeException(c):c;return b.trigger.on.error(e),e},d},n=function(a){return function(b){var c,d,e,f;b=b||{},e=function(b,c){b=b||a,b.getContext().pipeline.trigger.on.error(c)},d=function(a){i["function"](b.composeLifecycle)&&4===b.composeLifecycle.length?b.composeLifecycle(null,a,a.getContext().pipeline,c):i["function"](b.composeLifecycle)?(b.composeLifecycle(null,a,a.getContext().pipeline),c(null,a)):c(null,a)},c=function(a,d){a&&e(d,a);try{d.getContext().container[h.bootstrapperRegistration]=new o({name:h.bootstrapperRegistration,factory:function(){return{restart:function(){c(d)}}},dependencies:void 0,blueprint:void 0,singleton:void 0})}catch(g){a=g}i["function"](b.composeModules)&&3===b.composeModules.length?b.composeModules(a,d,f):i["function"](b.composeModules)?(b.composeModules(a,d),f(a,d)):f(a,d)},f=function(a,c){a&&e(c,a),i["function"](b.onComposed)&&b.onComposed(a,c)},d(a)}},e=function(){var a={};return a.beforeRegisterEvents=[],a.afterRegisterEvents=[],a.beforeResolveEvents=[],a.afterResolveEvents=[],a.beforeNewChildEvents=[],a.afterNewChildEvents=[],a.onError=[],a},f=function(a,b){var c,d,f,g={},i=new e;return c=function(b,c){switch(b){case h.pipeline.beforeRegister:return i.beforeRegisterEvents.push(c),a;case h.pipeline.afterRegister:return i.afterRegisterEvents.push(c),a;case h.pipeline.beforeResolve:return i.beforeResolveEvents.push(c),a;case h.pipeline.afterResolve:return i.afterResolveEvents.push(c),a;case h.pipeline.beforeNewChild:return i.beforeNewChildEvents.push(c),a;case h.pipeline.afterNewChild:return i.afterNewChildEvents.push(c),a;case h.pipeline.onError:return i.onError.push(c),a;default:g.trigger.on.error("the pipeline event you are trying to register is not implemented (name: "+b+")")}},f=function(a,c){var d,e,f,g=[];for(f=function(c,d,f){var g=a[c];3===g.length?g(d,f,e(c+1)):(g(d,f),e(c+1)(d,f)),g.once?a.splice(c,1):b["function"](g.remove)&&g.remove(d,f)&&a.splice(c,1)},e=function(d){return function(g,h){a.length===d?b["function"](c)&&c(g,h):b["function"](a[d])?f(d,g,h):e(d+1)}},d=0;d<a.length;d+=1)g.push(e(d));return g},d=function(a,c,d){var e=f(a,d);e.length>0?e[0](null,c):b["function"](d)&&d(null,c)},g.events=i,g.registerEvent=c,g.before={register:function(a){c(h.pipeline.beforeRegister,a)},resolve:function(a){c(h.pipeline.beforeResolve,a)},newChild:function(a){c(h.pipeline.beforeNewChild,a)}},g.after={register:function(a){c(h.pipeline.afterRegister,a)},resolve:function(a){c(h.pipeline.afterResolve,a)},newChild:function(a){c(h.pipeline.afterNewChild,a)}},g.on={error:function(a){c(h.pipeline.onError,a)}},g.register={before:g.before,after:g.after,on:g.on},g.trigger={before:{register:function(b,c){d(g.events.beforeRegisterEvents,{scope:a,moduleInfo:b},c)},resolve:function(b,c){d(g.events.beforeResolveEvents,{scope:a,moduleName:b},c)},newChild:function(b,c){d(g.events.beforeNewChildEvents,{scope:a,options:b},c)}},after:{register:function(b,c){d(g.events.afterRegisterEvents,{scope:a,moduleInfo:b},c)},resolve:function(b,c){var e={scope:a,moduleName:b&&b.name,result:b&&b.result};d(g.events.afterResolveEvents,e,c)},newChild:function(b,c,e){d(g.events.afterNewChildEvents,{scope:a,options:b,child:c},e)}},on:{error:function(c,d){var e,f,h=g.events.onError,i=0;for(e=b.object(c)&&c.stack?c:b.object(c)?a.getContext().exceptionHandlers.makeException(c.name,c.message||"Hilary Error - see err.data",c):b.string(c)?a.getContext().exceptionHandlers.makeException(c):c,i=0;i<h.length;i+=1)f=h[i],f.once?h.splice(i,1):b["function"](f.remove)&&f.remove(c)&&h.splice(i,1),b["function"](f)&&f(e);b["function"](d)&&d(e)}}},g},g=function(a,b){return function(c){var d;return c=c||{},d=a.not["function"](c.eventHandler)?function(){b.throwException("PipelineEvent eventHandler is missing. Did you register an empty PipelineEvent?")}:c.eventHandler,a["boolean"](c.once)&&(d.once=c.once),a["function"](c.remove)&&(d.remove=c.remove),d}},d=function(d,e){return function(f,g,i,j,k,m){var n,q,r,s,t,u,v,w,x={},y=[],z=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,A=/([^\s,]+)/g;return w={},w[h.containerRegistration]=g,w[h.parentContainerRegistration]=k?k.getContext().container:null,w[h.blueprintRegistration]=l,x.HilaryModule=o=function(a){var b=this;return d.not.string(a.name)?void m.throwArgumentException("The module name is required","name"):d.not.defined(a.factory)?void m.throwArgumentException("The module factory is required","factory"):(b.name=a.name,b.dependencies=a.dependencies||void 0,b.factory=a.factory,b.blueprint=a.blueprint,void(b.singleton=a.singleton))},x.asyncHandler=function(a,b,c){var f=function(){var e;return e=a(),!e&&d["function"](b)?void b(m.makeException(c)):void(d["function"](b)&&b(null,e))};e.runAsync(f)},x.createChildContainer=function(a,b,e){b=b||{};var f,g,h,i;return g=function(){b.parentContainer=a,j.trigger.before.newChild(b,h)},h=function(){f=new c(b),a.registerAsync&&f.useAsync(p),i(f)},i=function(a){d["function"](e)?j.trigger.after.newChild(b,a,function(){e(a)}):j.trigger.after.newChild(b,a)},g(),f},n=function(a){return a.dependencies||"function"!=typeof a.factory?a:(a.dependencies=s(a.factory),a)},s=function(a){if(!a)return[];var b=a.toString().replace(z,""),c=b.slice(b.indexOf("(")+1,b.indexOf(")")).match(A);return null===c&&(c=[]),c},q=function(a,b){return function(){var c=f.resolve(a),e=f.resolve(b),g=d.not["function"](c.signatureMatches),h="Blueprints must have a signatureMatches function";return g?{errors:[h],result:!1}:c.syncSignatureMatches(e)}},r=function(a){if(d.string(a.blueprint))y.push({blueprintName:a.blueprint,moduleName:a.name});else if(d.array(a.blueprint)){var b;for(b=0;b<a.blueprint.length;b+=1)y.push({blueprintName:a.blueprint[b],moduleName:a.name})}},t=function(a,b){var c=function(a,b){i[a]=b};b?c(a.name,b):(d.object(a.factory)||d["function"](a.factory)&&a.factory.length>0&&(d.not.defined(a.dependencies)||a.dependencies.length<1))&&c(a.name,a.factory)},u=function(){var a,b,c,e,f,i,k,l,o,p={start:void 0,startAsync:void 0,output:void 0};return a=function(a,b){var c;return(d.not.defined(a)||d.not.string(a.name)||d.not.defined(a.factory))&&(c=m.throwArgumentException("At least a name and a factory is required to register a module","hilaryModule")),h.blackListedRegistrations[a.name]&&(c=m.throwArgumentException("The name you are trying to register is reserved","moduleName",a.name)),c&&d["function"](o)?void o(c):void b(a)},b=function(b,c){x.asyncHandler(function(){o=d["function"](c)?c:function(){},a(b,e)})},c=function(a){j.trigger.before.register(a,f)},e=function(a){x.asyncHandler(function(){j.trigger.before.register(a,i)})},f=function(a,b,c){var e=c||k;if(a)return void e(a);if(!b||!b.moduleInfo)return void e(m.argumentException("The before.register pipeline did not return the module information","payload"));try{var f=n(b.moduleInfo);g[f.name]=f,t(f),d.defined(f.blueprint)&&r(f),e(null,f)}catch(h){e(h)}},i=function(a,b){x.asyncHandler(function(){f(a,b,l)})},k=function(a,b){a&&m.throwException(a),j.trigger.after.register(b,function(a,b){p.output=b&&b.moduleInfo})},l=function(a,b){return a?(m.throwException(a),void o(a)):void j.trigger.after.register(b,function(a,b){o(a,b&&b.moduleInfo)})},p.start=function(b){a(b,c)},p.startAsync=b,p},x.register=function(a){var b=u();return b.start(a),b.output},v=function(){var a,b,c,e,f,h,k,l,n,o,p={start:void 0,startAsync:void 0,output:void 0};return a=function(a){return d.string(a)?!0:m.argumentException("The moduleName must be a string. If you are trying to resolve an array, use resolveMany.","moduleName")},b=function(b,c){var d=a(b);return d!==!0?void m.throwException(d):void c(b)},c=function(b,c){x.asyncHandler(function(){o=d["function"](c)?c:function(){};var e=a(b);return e!==!0?(m.throwException(e),void o(e)):void f(b)})},e=function(a){j.trigger.before.resolve(a,h)},f=function(a){x.asyncHandler(function(){j.trigger.before.resolve(a,k)})},h=function(a,b,c){var e,f,h=c||l;return a?void h(a):d.not.defined(b)||d.not.string(b.moduleName)?void h(m.argumentException("The moduleName was not passed through by the before.resolve pipeline.","moduleName")):(e=b.moduleName,void(void 0!==i[e]?h(null,{name:e,result:i[e]}):void 0!==g[e]&&c?x.invokeAsync(g[e],function(a,b){if(a)h(a);else if(b)g[e].singleton===!0&&t(g[e],b),h(a,{name:e,result:b});else{var c=m.notResolvableException(e);h(c)}}):void 0!==g[e]?(f=x.invoke(g[e]),g[e].singleton===!0&&t(g[e],f),h(null,{name:e,result:f})):h(null,{name:e,result:x.findResult(e)})))},k=function(a,b){x.asyncHandler(function(){h(a,b,n)})},l=function(a,b){return a?void m.throwException(a):void j.trigger.after.resolve({name:b.name,result:b.result},function(a,b){p.output=b&&b.result})},n=function(a,b){x.asyncHandler(function(){if(a)return m.throwException(a),void o(a);if(!b.result){var c=m.notResolvableException(b.name);return void o(c)}j.trigger.after.resolve({name:b.name,result:b.result},function(a,b){o(a,b&&b.result)})})},p.start=function(a){b(a,e)},p.startAsync=c,p},x.resolve=function(a){var b=v();return b.start(a),b.output?b.output:void m.throwNotResolvableException(a)},x.resolveMany=function(a,b){var c,e,g=[];if(d.not.array(a))return void m.throwArgumentException("The moduleNameArray is required and must be an Array","moduleNameArray");if(d.not["function"](b))return void m.throwArgumentException("The next argument is required and must be a Function","next");for(c=0;c<a.length;c+=1)try{e=f.resolve(a[c]),g.push(e)}catch(h){g.push(h)}return b.apply(null,g)},x.resolveManyAsync=function(a,b){var c,e=[],g={},h=function(a){return function(b){if(f.exists(a))g[a]=f.resolve(a),b(null,null);else{var c=m.notResolvableException(a);m.throwException(c),b(c)}}};if(d.not.array(a))return void m.throwArgumentException("The moduleNameArray is required and must be an Array","moduleNameArray");if(d.not["function"](b))return void m.throwArgumentException("The next argument is required and must be a Function","next");for(c=0;c<a.length;c+=1)e.push(h(a[c]));p.parallel(e,function(a){b(a,g)})},x.resolveAsync=function(a,b){return v().startAsync(a,b),f},x.findResult=function(c){if(w[c])return w[c];if(void 0!==k)return k.resolve(c);if(b)try{return b(c)}catch(d){return null}else if(window)return a[c]},x.invoke=function(a){return d.array(a.dependencies)&&a.dependencies.length>0?x.applyDependencies(a):d["function"](a.factory)&&0===a.factory.length?a.factory.call():a.factory},x.invokeAsync=function(a,b){var c;return d.array(a.dependencies)&&a.dependencies.length>0?void x.applyDependenciesAsync(a,b):(c=d["function"](a.factory)&&0===a.factory.length?a.factory.call():a.factory,a.singleton===!0&&t(a,c),void b(null,c))},x.applyDependencies=function(a){var b,c=[],d=function(a){return x.resolve(a)};for(b=0;b<a.dependencies.length;b+=1)c.push(d(a.dependencies[b]));return a.factory.apply(null,c)},x.applyDependenciesAsync=function(a,b){var c,d=[],e=function(a){return function(b){x.resolveAsync(a,b)}};for(c=0;c<a.dependencies.length;c+=1)d.push(e(a.dependencies[c]));p.parallel(d,function(c,d){var e=a.factory.apply(null,d);a.singleton===!0&&t(a,e),b(null,e)})},x.makeAutoRegistrationTasks=function(a,b){var c,e,f=[];if(d.object(a)&&(a.name||a.dependencies||a.factory))f.push(function(){b(a).call()});else if(d.object(a))for(c in a)a.hasOwnProperty(c)&&f.push(b(a[c]));else{if(!d.array(a))return void m.throwArgumentException("A index must be defined and must be a typeof object or array","index");for(e=0;e<a.length;e+=1)f.push(b(a[e]))}return f},x.autoRegister=function(a,b){var c,e,f;c=function(a){return function(){x.register(a)}};try{for(e=x.makeAutoRegistrationTasks(a,c),f=0;f<e.length;f+=1)e[f]();d["function"](b)&&b(null)}catch(g){b(g)}},x.autoResolve=function(a,b){var c,e,g;c=function(a){return function(){d.array(a.dependencies)&&d["function"](a.factory)?f.resolveMany(a.dependencies,a.factory):d["function"](a.factory)&&0===a.factory.length&&a.factory()}};try{for(e=x.makeAutoRegistrationTasks(a,c),g=0;g<e.length;g+=1)e[g]();d["function"](b)&&b(null,null)}catch(h){b(h)}},x.autoResolveAsync=function(a,b){var c;c=function(a){return function(b){d.array(a.dependencies)&&d["function"](a.factory)?(f.resolveManyAsync(a.dependencies,a.factory),b(null,null)):d["function"](a.factory)&&0===a.factory.length?(a.factory(),b(null,null)):b(m.argumentException("One or more of the items in this index do not meet the requirements for resolution.","index",a))}},p.parallel(x.makeAutoRegistrationTasks(a,c),b)},x.exists=function(a){return g[a]?!0:!1},x.dispose=function(a){var b,c,e;if(d.string(a))return x.disposeOne(a);if(d.array(a)){for(e=!0,c=0;c<a.length;c+=1)e=e&&x.disposeOne(a[c]);return e}if(a)return!1;e=!0;for(b in g)g.hasOwnProperty(b)&&(e=e&&x.disposeOne(b));return y=[],e},x.disposeOne=function(a){return g[a]?(delete g[a],!0):!1},x.validateBlueprints=function(){var a,b,c=[],d=[],e=!0;for(b=0;b<y.length;b+=1)c.push(q(y[b].blueprintName,y[b].moduleName));for(b=0;b<c.length;b+=1)a=c[b](),a.result===!1&&(d=d.concat(a.errors),e=!1);return e?{errors:null,result:!0}:{errors:d,result:!1}},x.validateBlueprintsAsync=function(a){var b,c,d=[];for(b=function(a){return function(b){var c=q(y[a].blueprintName,y[a].moduleName)();b(c.errors,c.result)}},c=0;c<y.length;c+=1)d.push(b(c));p.parallel(d,a)},x.useAsync=function(a){return a&&a.nextTick&&a.waterfall&&a.parallel?(p||(p=a),f.registerAsync=function(a,b){return e.runAsync(function(){var c;return(c=new o(a))?void u().startAsync(c,b):void b(m.argumentException("Unable to register the module: "+(a&&a.name),"definition"))}),f},f.autoRegisterAsync=function(a,b){var c;return c=function(a){return function(b){f.registerAsync(a,b)}},p.parallel(x.makeAutoRegistrationTasks(a,c),b),f},f.resolveAsync=function(a,b){return x.resolveAsync(a,b),f},f.resolveManyAsync=function(a,b){return x.resolveManyAsync(a,b),f},f.autoResolveAsync=function(a,b){return x.autoResolveAsync(a,b),f},f.disposeAsync=function(a,b){var c=b,g=a;return d["function"](a)&&(c=a,g=null),e.runAsync(function(){c(null,f.dispose(g))}),f},f.validateBlueprintsAsync=function(a){return x.validateBlueprintsAsync(a),f},f.registerEventAsync=function(a,b,c){return x.asyncHandler(function(){return f.registerEvent(a,b)},c,"Unable to register the event: "+a),f},f):void m.throwArgumentException("The async library is required (https://www.npmjs.com/package/async)","async")},x}}(i,k),c=function(a){var b=this,c=a||{},e={},k={},l=c.parentContainer,o=c.pipeline||new f(b,i),p=new m(i,o),t={},u={},v=new d(b,e,k,o,l,p);for(b.createChildContainer=function(a){var c;return c=i.string(a)?{name:a}:i.object(a)?a:{},v.createChildContainer(b,c)},b.setParentContainer=function(a){"function"==typeof a.register&&"function"==typeof a.resolve&&(l=a,v=new d(b,e,k,o,l,p))},b.register=function(a){return v.register(new v.HilaryModule(a)),b},b.autoRegister=function(a,c){return v.autoRegister(a,c),b},b.resolve=function(a){return v.resolve(a)},b.resolveMany=function(a,b){return v.resolveMany(a,b)},b.autoResolve=function(a,c){return v.autoResolve(a,c),b},b.exists=function(a){return v.exists(a)},b.dispose=function(a){return v.dispose(a)},b.registerEvent=function(a,c){return o.registerEvent(a,c),b},b.validateBlueprints=function(){return v.validateBlueprints()},b.useAsync=function(a){return v.useAsync(a),b},b.Bootstrapper=new n(b),b.PipelineEvent=new g(i,p),b.getContext=function(){return{container:e,singletons:k,parent:l,pipeline:o,HilaryModule:v.HilaryModule,register:v.register,constants:h,is:i,id:j,exceptionHandlers:p,namedScope:c.name}},t.count=0;t.count<q.length;t.count+=1)t.current=q[t.count],i["function"](t.current.factory)?b[t.current.name]=t.current.factory(b):i.defined(t.current.factory)&&(b[t.current.name]=t.current.factory);for(u.count=0;u.count<s.length;u.count+=1)u.current=s[u.count],i["function"](u.current)&&u.current(b,c);c.name&&(r[c.name]=b)},c.extend=function(a,b){return q.push({name:a,factory:b}),!0},c.onInit=function(a){return s.push(a),!0},c.scope=function(a,b){return r[a]?r[a]:(b=b||{},b.name=a,r[a]=new c(b),r[a])},c.Blueprint=l,a.Hilary=c}("undefined"!=typeof module&&module.exports?module.exports:window,"undefined"!=typeof module&&module.exports?require:void 0);